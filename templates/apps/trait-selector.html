<form autocomplete="off" onsubmit="event.preventDefault();">

    {{#*inline "traitList"}}
    <ol class="trait-list">
        {{#each choices as |choice key|}}
        <li class="trait toggleable{{#if choice.children}} has-children{{/if}}{{#if choice.chosen}} toggle-on{{/if}}" tabindex="-1">
            <label class="checkbox">
                <input type="checkbox" name="{{key}}" data-dtype="Boolean" {{checked choice.chosen}} onclick="toggle()">
                {{choice.label}}
            </label>
            {{#if choice.children}}
			  <i tabindex="1" class="expand fa-solid fa-chevron-down toggleable" onclick="toggle()"></i>
              {{> traitList choices=choice.children}}
            {{/if}}
        </li>
        {{/each}}
    </ol>
    {{/inline}}

    {{> traitList}}
    {{#if allowCustom}}
    <div class="form-group stacked">
        <label>{{ localize "DND4E.TraitSelectorSpecial" }}</label>
        <input type="text" name="custom" value="{{custom}}" data-dtype="String"/>
    </div>
    {{/if}}
    <button type="submit" name="submit" value="1"><i class="far fa-save"></i> {{ localize "DND4E.TraitSave"}}</button>
</form>

<script>
	function toggle() {		
		target = event.srcElement.closest(".toggleable");	
		target.classList.toggle("toggle-on");
	}
</script>