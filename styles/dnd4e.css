/* ----------------------------------------- */
/*  Global Basics
/* ----------------------------------------- */
.dnd4e-blast-svg{
	content:url('../icons/ui/blast.svg');
}
.dnd4e-burst-svg{
	content:url('../icons/ui/burst.svg');
}
.colorBlindRG .dnd4e{
	--background-atwill:-o-linear-gradient(45deg, #003c15, #087830);
	--background-atwill:linear-gradient(45deg, #003c15, #087830);
	--background-encounter:-o-linear-gradient(45deg, #003854, #89cdef);
	--background-encounter:linear-gradient(45deg, #003854, #89cdef);
	--background-daily:-o-linear-gradient(45deg, #005748, #42ac9a);
	--background-daily:linear-gradient(45deg, #005748, #42ac9a);
	--background-recharge:-o-linear-gradient(45deg, #695702, #decd78);
	--background-recharge:linear-gradient(45deg, #695702, #decd78);
	--background-other:-o-linear-gradient(45deg, #0d0145, #301c89);
	--background-other:linear-gradient(45deg, #0d0145, #301c89);
}
.colorBlindBY .dnd4e{
	--background-atwill:-o-linear-gradient(45deg, #796501, #efde89);
	--background-atwill:linear-gradient(45deg, #796501, #efde89);
	--background-encounter:-o-linear-gradient(45deg, #4e0129, #891c54);
	--background-encounter:linear-gradient(45deg, #4e0129, #891c54);
	--background-daily:-o-linear-gradient(45deg, #333300, #9a9a30);
	--background-daily:linear-gradient(45deg, #333300, #9a9a30);
	--background-recharge:-o-linear-gradient(45deg, #01536e, #66cdef);
	--background-recharge:linear-gradient(45deg, #01536e, #66cdef);
	--background-other:-o-linear-gradient(45deg, #0d0145, #301c89);
	--background-other:linear-gradient(45deg, #0d0145, #301c89);
}

.dnd4e{
	--gradient-4e:linear-gradient(90deg, #c3c2b7, #c3c2b718);
	--background-atwill:-o-linear-gradient(45deg, #125f15, #55aa2e);
	--background-atwill:linear-gradient(45deg, #125f15, #55aa2e);
	--background-encounter:o-linear-gradient(45deg, #3c0000, #dc0000);
	--background-encounter:linear-gradient(45deg, #3c0000, #dc0000);
	--background-daily:-o-linear-gradient(45deg, #1b1b1d, #ababab);
	--background-daily:linear-gradient(45deg, #1b1b1d, #ababab);
	--background-recharge:-o-linear-gradient(45deg, #01003c, #71a2ec);
	--background-recharge:linear-gradient(45deg, #01003c, #71a2ec);
	--background-other:-o-linear-gradient(45deg, #25003c, #dc9ff1a6);
	--background-other:linear-gradient(45deg, #25003c, #dc9ff1a6);
	--background-item:-o-linear-gradient(45deg, #6a581c, #d4af37);
	--background-item:linear-gradient(45deg, #6a581c, #d4af37);
	--color-label:var(--color-text-secondary);
	--color-text-good:green;
	--color-text-bad:red;
	--input-box-shadow:none;
	
	.window-content{
		padding:0.5em;
		
		&.standard-form{
			gap:0;
		}
	}
	&.standard-form{
		gap:0;
	}
	input[type="checkbox"]::before,
	input[type="radio"]::before,
	input[type="checkbox"]::after,
	input[type="radio"]::after{
		display:inline-block;
	}
	code:not(.block){
		display:inline;
		background:unset;
		border:unset;
	}
	.fakebutton{
		width:100%;
		border:var(--border-engraved);
		border-radius:2px;
		background:var(--color-bg-btn-minor-active);
		padding:1px 3px;
		margin:0 3px;
		text-align:center;
		font-size:14px;
	}
	.ability-usage--atwill{
		background:var(--background-atwill);
	}
	.force-ability-usage--atwill{
		background:var(--background-atwill) !important;
	}
	.ability-usage--encounter{
		background:var(--background-encounter);
	}
	.force-ability-usage--encounter{
		background:var(--background-encounter) !important;
	}
	.ability-usage--daily{
		background:var(--background-daily);
	}
	.force-ability-usage--daily{
		background:var(--background-daily) !important;
	}
	.ability-usage--recharge{
		background:var(--background-recharge);
	}
	.force-ability-usage--recharge{
		background:var(--background-recharge) !important;
	}
	.ability-usage--other{
		background:var(--background-other);
	}
	.force-ability-usage--other{
		background:var(--background-other)!important;
	}
	.ability-usage--item{
		background:var(--background-item);
	}
	.force-ability-usage--item{
		background:var(--background-item) !important;
	}
	.effect-tooltip{
		text-align:left;
	}
	.region-behavior-config i.difficult-terrain-icon{
		content:url('/systems/dnd4e/icons/ui/difficultTerrain.svg');
		height:1em;
	}
	.region-config i.difficult-terrain-icon{
		content:url('/systems/dnd4e/icons/ui/difficultTerrain.svg');
		filter:var(--white-svg-filter);
		height:1em;
		position:relative;
		top:2px;
	}
}

.sheet.standard-form{
	gap:0;
	.window-content,
	&.window-content{
		padding:0.5em;
		gap:0;
	}
}

body.theme-dark .dnd4e:is(.default,.standard-form){
	--border-engraved:2px groove #000;
	--border-heavy:3px solid #453832;
	--border-medium:2px solid #453832;
	--border-normal:1px solid #453832;
	--border-faint:1px solid #453832;
	--background:#221d21;
	--color-form-hint:var(--color-text-subtle);
	--white-svg-filter:brightness(0) saturate(100%) invert(91%) sepia(17%) saturate(207%) hue-rotate(345deg) brightness(103%) contrast(87%);
	--automath-brightness:1;
	--input-background-color:var(--color-cool-4);
	--input-border-color:var(--border-faint);
	--input-box-shadow:none;
	--input-text-color:inherit;
	--checkbox-font-weight:bold;
	--checkbox-background-color:var(--color-cool-4);
	--checkbox-checked-color:#253c5e;
	--checkbox-checkmark-color:#fff;
	
	input,select,textarea,code-mirror{
		--input-background-color:var(--color-cool-4);
		--input-border-color:var(--border-faint);
		--input-box-shadow:none;
		--input-text-color:inherit;
	}
	input[type=checkbox],
	input[type=radio]{
		--checkbox-font-weight:bold;
		--checkbox-background-color:var(--color-cool-4);
		--checkbox-checked-color:#253c5e;
		--checkbox-checkmark-color:#fff;
	}
}
body.theme-light .dnd4e:is(.default,.standard-form){
	--border-engraved:2px groove #fff;
	--border-heavy:3px solid var(--color-text-subtle);
	--border-medium:2px solid var(--color-text-subtle);
	--border-normal:1px solid var(--color-text-subtle);
	--border-faint:1px solid #c3b3ae;
	--color-form-hint:var(--color-text-subtle);
	--color-bg-btn-minor-inactive:rgba(255,255,255,0);
	--color-bg-btn-minor-active:rgba(0,0,0,0.05);
	--color-bg-option:unset;
	--white-svg-filter:brightness(0) saturate(100%) invert(9%) sepia(1%) saturate(0%) hue-rotate(147deg) brightness(99%) contrast(89%);
	--automath-brightness:0.1;
	--input-background-color:rgba(0,0,0,0.05);
	--input-border-color:#c3b3ae;
	--input-box-shadow:none;
	--input-text-color:inherit;
	--checkbox-font-weight:400;
	--checkbox-background-color:#c3b3ae;
	--checkbox-checked-color:#253c5e;
	--checkbox-checkmark-color:#fff;
	
	input,select,textarea,code-mirror{
		--input-background-color:rgba(0,0,0,0.05);
		--input-border-color:#c3b3ae;
		--input-box-shadow:none;
		--input-text-color:inherit;
	}
	input[type=checkbox],
	input[type=radio]{
		--checkbox-font-weight:400;
		--checkbox-background-color:#c3b3ae;
		--checkbox-checked-color:#253c5e;
		--checkbox-checkmark-color:#fff;
	}
}


/* ----------------------------------------- */
/*  Sheets
/* ----------------------------------------- */

/* ------------ Sheet Dimensions ---------- */
.dnd4e.sheet.actor.default:not(.NPC,.Hazard,.minimized){
	min-width:836px;
	min-height:420px;
}
.dnd4e.sheet.actor.default.NPC:not(.minimized){
	min-width:655px;
}

/* ------------ All Sheets ---------- */
.dnd4e:is(.default,.standard-form) .window-content{
	--input-height:2em;
	--checkbox-size:1.75rem;
	
	fieldset{
		padding:0.5em 1em 1em;
		gap:2px;
	}
	.inline-list{
		margin:0;
		> li{
			display:inline-block;
			padding-right:0.8em;	
		}
		> li::before{
			content:'\2022';
			padding-right:2px;
		}
	}
	.collapsible{
		.collapsible-content{
			display:grid;
			grid-template-rows:1fr;
			transition:all 250ms ease;
			> .wrapper{
				overflow:hidden;
			}
		}
		.fa-caret-down{
			flex:0;
			transition:transform 250ms ease;
		}
		&.collapsed{
			.fa-caret-down{
				transform:rotate(-90deg);
			}
			.collapsible-content{
				grid-template-rows:0fr;
			}
		}
	}
	.section--tabs{
		flex:0;
	}
	.section--tabs nav.sheet-tabs{
		border-top:0;
		border-bottom:var(--border-normal);
	}
	.form-header{
		margin:0.5em 0 0;
		padding:2px 0;
		border-top:var(--border-engraved);
		border-bottom:var(--border-engraved);
		font-family:"Modesto Condensed", "Palatino Linotype", serif;
		font-size:20px;
		font-weight:700;
		
		&.enhancement-bonus{
			margin-top:5px;
		}
		&.checkbox{
			justify-content:space-between;
		}
		&.checkbox>*:last-child{
			flex-grow:0;
			margin-left:auto;
		}
		&.checkbox>label{
			flex:fit-content 0 0;
			font-family:var(--font-body);
			font-size:0.68em;
		}
	}
	a.button,button{
		border:var(--border-faint);
	}
	input.action-box{
		height:14px;
		width:14px;
		position:relative;
		top:3px;
	}
	ul.attributes .movement input{
		width:28px;
		text-align:left;
	}
	ul.attributes .movement{
		text-align:center;
	}
	.languages{
		text-align:left;
	}
	.tabs{
		height:40px;
		border-bottom:var(--border-engraved);
		border-top:unset;
		font-weight:bold;
		font-size:80%;
		text-transform:uppercase;
		
		.tab{
			font-family:var(--font-h4);
		}
		.item{
			line-height:40px;
			font-weight:bold;
		}
		.item.active{
			text-decoration:underline;
			text-shadow:none;
		}
	}
	section.tab{
		padding-top:0.5em;
	}
	.sheet-body{
		flex:1;
		overflow:hidden;
		
		.tab{	
			height:100%;
			overflow:hidden auto;
			align-content:flex-start;
			scrollbar-width:thin;
			scrollbar-gutter:stable;
		}
	}
	input::placeholder{
		opacity:0.4;
	}
	input[type='text'],input[type='number'],
	input[type='password'],input[type='date'],
	input[type='time'],input[type='datetime-local'],
	input[type='search'],input[type='file'],select{
		border:var(--border-faint);
        line-height:1;
	}
	multi-select>.tags.input-element-tags{
		justify-content:flex-start;
		align-items:stretch;
	}
	multi-select>.tags.input-element-tags>.tag{
		height:var(--input-height);
		border:var(--border-faint);
		background:var(--input-background-color);
	}
	multi-select.inline{
		flex-direction:row;
		justify-content:flex-start;
		flex-wrap:wrap;
		
		> .tags.input-element-tags{
			flex:fit-content 0 0;
		}
		> select{
			flex:fit-content 100 0;
		}
	}
	textarea.no-mono{
		height:3.2em;
		min-height:3.2em;
		flex:unset;
		font-family:inherit;
	}
	form,
	> section{
		height:100%;
		overflow:hidden;
	}
	.container--bottom{
		height:calc(100% - 190px);
	}
	.section--sidebar{
		max-width:260px;
		border-right:var(--border-heavy);
		height:100%;
		overflow-y:auto;
		scrollbar-width: thin;
	} 
	.section--main{
		height:100%;
	}
	.section--utilities{
		border-bottom:var(--border-heavy);
		max-height:80px;
		text-transform:uppercase;
		font-size:16px;
	}
	.denomination{
		text-transform:uppercase;
	}
	.form-group{
		label{
			flex:2;
			line-height:1;
			max-width:174px;
			color:var(--color-label);
			
			&.long{
				max-width:unset;
			}
			&.inline::before{
				text-align:right;
				margin-right:0.35em;
			}
			&.checkbox{
				font-size:1em;
				
				>input[type='checkbox'],
				>input[type='radio']{
					--checkbox-size:1.2rem;
				}
			}
		}			
		&.wide label{
			max-width:208px;
		}
		&.columns-4 label.checkbox{
			flex:0 0 118px;
			font-size:0.9em;
		}
		&.columns-4 label:not(.checkbox,.damage-override){
			flex:100% 0 0;
			max-width:unset;
		}
		.form-fields{
			display:flex;
			flex-direction:row;
			flex-wrap:wrap;
			justify-content:flex-start;
			
			> label{
				white-space:nowrap;
			}
			> *{
				margin:0 3px 0 0;
				flex:1;
			}
			> *:last-child{
				margin-right:0;
			}
			.flex1{
				flex:1;
			}
			.flex2{
				flex:2;
			}
			.flex3{
				flex:3;
			}
			.flex4{
				flex:4;
			}
			.tight{
				width:fit-content;
                flex:fit-content 0 0;
			}
		}
	}
	.vertical{
		flex-direction:column;
		flex-wrap:nowrap;
		gap:0.1rem;
		align-items:stretch;
		
		label.checkbox{
			flex:auto;
			text-align:left;
			line-height:1;
		}
		input[type='text'],input[type='number'],
		input[type='password'],input[type='date'],
		input[type='time'],input[type='datetime-local'],
		input[type='search'],input[type='file'],select{
			min-height:2em;
		}
		label{
			flex:1;
			max-width:unset;
		}
	}
	.loose{
		justify-content:space-between;
		flex-wrap:nowrap;
		
		>*{
			flex:fit-content;
		}
	}
	.right{
		justify-content:flex-end;
		
		>label{
			flex-grow:0;
			flex-basis:fit-content;
		}
	}
	.label,.list-label{
		font-weight:bold;
	}
	:not(.form-group,.form-header)>.checkbox .label{
		font-weight:bold;
	}
	.rich-effect{
		border:1px solid var(--input-border-color);
		background:var(--input-background-color);
		border-radius:4px;
	}
	.label-hint{
		font-weight:normal;
		font-style:oblique;
	}
	.section--utilities section{
		margin-bottom:5px;
	}
	.section--utilities section+section{
		border-left:var(--border-faint);
	}
	.image-frame{
		max-width:100px;
		max-height:100px;
		position:relative;
		
		.profile{
			flex:0 0 100px;
			object-fit:cover;
			object-position:top;
			display:block;
			margin-left:auto;
			margin-right:auto;
			border-width:2px;
			border:var(--border-medium);
		}
		.hover-icon{
			display:none;
			position:absolute;
			right:2px;
			bottom:0;
			text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
			color:#fff;
		}
		&:hover .hover-icon{
			display:block;
		}
	}
	.sheet-header{
		.summary{
			flex:0 0 100%;
			height:40px;
			margin:0;
			padding:0;
			list-style:none;
			
			&.flexrow{
				justify-content:space-between;
				align-items:center;
				
				>li{
				white-space:nowrap;
					display:flex;
					align-items:center;
					margin:2px;
				}
			}
			label{
				flex-basis:30px;
			}
		}
		img{
			margin-right:0;
		}
		.summary-name{
			flex-basis:calc(46% - 34px);
		}
		.summary-race,
		.summary-class{
			flex-basis:calc(26% - 34px);
		}
		.summary-level{
			flex-basis:98px;
		}
		.summary-level label{
			width:50%;
		}
		.summary-level input{
			text-align:center;
			width:35%;
			padding:0%;
		}
		.summary-path{
			flex-basis:calc(49% - 68px);
		}
		.summary-exp{
			flex-basis:135px;
		}
		.summary-exp label{
			width:50%;
		}
		.summary-exp input{
			text-align:center;
			width:65%;
			padding:0%;
		}
		.header-fields{
			flex:1;
			height:99px;
		}
		.header-details .summary input{
			vertical-align:bottom;
			height:1.3em;
		}
		.hitdata input{
			vertical-align:top;
		}
		.hitdata .left{
			width:30%;
			float:left;
			height:24px;
			padding:0 3px;
			border-right:var(--border-engraved);
			border-bottom:var(--border-engraved);
			line-height:24px;
		}
		.header-details{
			margin-left:0.5em;
			font-family:"Modesto Condensed", "Palatino Linotype", serif;
			font-size:20px;
			font-weight:700;
		}
		.header-details h1{
			font-size:1.5em;
			margin-bottom:0;
			height:100%;
			--input-height:1.8em;
		}
	}	
	.item-list{
		list-style:none;
		margin:7px 0;
		padding:0;
		
		.item img{
			flex:0 0 24px;
			margin-right:5px;
			border:unset;
		}
		.item-name{
			margin:0;
		}
		.item-controls{
			flex:0 0 36px;
		}
		.item{
			line-height:1;
			padding:0 2px;
			border-bottom:var(--border-faint);
			
			&:last-child{
				border-bottom:none;
			}
			.item-name{
				cursor:pointer;
				max-height:30px;
				overflow:hidden;
				height:30px;
			}
			.item-image{
				flex:0 0 30px;
				max-width:30px;
				margin-right:5px;
				border:unset;
			}
			&:hover .rollable .item-image,
			&:hover .item-image.rollable{
				background:url("/icons/svg/d20-grey.svg") no-repeat;
				background-size:contain;
			}
			.item-image.rollable:hover,
			.rollable .item-image:hover{
				background:url("/icons/svg/d20-black.svg") no-repeat;
				background-size:contain;
			}
			&:hover .rollable .item-image img,
			&:hover .item-image.rollable img,
			.item-image.rollable:hover img,
			.rollable .item-image:hover img{
				opacity:0;
			}
			.item-name h4{
				margin:0;
				white-space:nowrap;
				overflow:hidden;
				font-family:var(--font-body);
				font-weight:normal;
				font-size:medium;
			}
			.item-uses input{
				width:24px;
				text-align:right;
				margin-right:-6px;
			}
			.item-properties{
				margin-top:3px;
			}
			.item-recharge{
				flex:0 0 80px;
				text-align:right;
				font-size:11px;
				white-space:nowrap;
			}
		}
		.items-header {
			margin:2px 0;
			padding:0;
			background:var(--color-bg-btn-minor-active);
			border-bottom:var(--border-engraved);
			font-weight:bold;
			
			.item-name{
				font-family:"Modesto Condensed", "Palatino Linotype", serif;
				margin:0 -5px 0 0;
				padding-left:5px;
				font-weight:700;
				font-size:16px;
				border-bottom:0;
			}
			.item-controls{
				width:90px;
                text-align:right;
				
				a.item-create,
				a.power-create{
					flex:0 0 100%;
				}
			}
		}
		.item-detail{
			flex:0 0 68px;
			font-size:12px;
			text-align:center;
			border-right:var(--border-faint);
			word-break:break-word;
			white-space:nowrap;
			overflow:hidden;
		}
		.item-range{
			flex:0 0 68px;
		}
		.item-range .range-number{
			background-color:var(--color-bg-input);
			border-radius:2px;
			padding-left:2px;
			padding-right:2px;
		}
		.power-list .item .power-name,
		.power-list .item .power-name input,
		.power-list .item .power-name h4{
			color:#eee;
		}
		.power-detail{
			padding-left:3px;
			border:unset;
		}
		.unavailable :is(.item-detail,.item-title){
			opacity:0.5;
		}
		.item-detail:last-child{
			border-right:none;
		}
		.item-detail.item-action{
			flex:0 0 40px;
		}
		.power .item-detail.item-action{
			text-transform:uppercase;
		}
		.item-detail.item-prep{
			flex:0 0 34px;
		}
		.item-weight{
			flex:0 0 60px;
			border-left:var(--border-faint);
			border-right:var(--border-faint);
		}
		.power-target{
			flex:0 0 86px;
			border-left:var(--border-faint);
			border-right:var(--border-faint);
		}
		.item-list{
			list-style:none;
			margin:0 -2px 0 0;
			padding:0;
		}
		.item-controls{
			flex:0 0 66px;
			display:flex;
			flex-direction:row;
			flex-wrap:nowrap;
			justify-content:flex-end;
		}
		.item-list.effects-list{
			overflow-y:visible;
		}
		header{
			margin:0.25rem;
			gap:0.25rem;
		}
	}
	.currency{
		flex:0;
		list-style:none;
		margin:4px 0 8px;
		padding:0;
		font-size:12px;
		align-items:center;
		
		label{
			flex:0;
			white-space:nowrap;
			margin-left:0px;
			text-align:right;
			line-height:20px;
		}
		input[type='text']{
			flex:0 0 48px;
			text-align:center;
			margin-left:0;
			border-bottom:var(--border-normal);
		}
		h3{
			font-size:medium;
			margin:0;
		}
	}
	ol.currency+ol.currency{
		margin-top:-0.5rem;
	}
	.encumbrance{
		height:12px;
		cursor:pointer;
		background:var(--color-bg-input);
		margin:10px 1px 1px 1px;
		border:var(--border-normal);
		border-radius:3px;
		position:relative;
		
		.encumbrance-bar{
			position:absolute;
			top:1px;
			left:1px;
			height:8px;
			background:#6c8aa5;
			border:1px solid #cde4ff;
			border-radius:2px;			
			&.encumbered{
				background:#b72b2b;
			}
		}
		.encumbrance-label{
			height:10px;
			padding:0 5px;
			position:absolute;
			top:0;
			right:0;
			font-size:13px;
			line-height:12px;
			text-align:right;
			color:#eee;
			text-shadow:0 0 5px #000;
		}
	}
	.tab{
		gap:0.5rem;
	}
	.editable .rollable:hover,
	.rollable:hover{
		text-shadow:0 0 10px red;
		cursor:pointer;
	}
	.attribute-res .resistances-special{
		text-align:left;
		height: 62px;
	}
	.sheet-navigation{
		flex:0 0 30px;
		margin-bottom:5px;
		font-family:"Modesto Condensed", "Palatino Linotype", serif;
		font-size:20px;
		font-weight:700;
	}
	.sheet-navigation .item{
		height:30px;
		line-height:32px;
		margin:0 24px;
		border-bottom:var(--border-heavy);
	}
	.sheet-navigation .item.active{
		border-bottom:var(--border-heavy);
	}
	input[type="checkbox"]{
        line-height:1;
        margin:0;
		height:fit-content;
	}
	prose-mirror.active{
		min-height:20em;
	}
	prose-mirror.inactive{
		min-height:2em;
		.editor-content{
			position:relative;
		}
	}
	prose-mirror.inactive .editor-content{
		height:fit-content;
	}
	.tags.input-element-tags .tag{
		font-size:inherit;
	}
	.sheet-header{
		border-bottom:var(--border-engraved);
	}
	fieldset>header{
		background:var(--color-bg-btn-minor-active);
		border-bottom:var(--border-engraved);
		font-weight:bold;
		font-size:0.7em;
		text-transform:uppercase;
	}	
	.form-group{
		span.checkbox{
			display:flex;
			align-items:center;
			justify-content:flex-start;
		}		
		label.checkbox.small{
			font-size:0.9em;
		}
		ul,ol{
			margin-top:0;
		}
	}
	.right{
		margin-left:auto;
	}
	table{
		margin:0;
		
		thead,tfoot{
			border:unset;
		}
		th,td{
			padding:0.2em;
			
			input:not([type="radio"],[type="checkbox"]){
				width:100%;
			}
		}
	}
	.disallowed{
		cursor:not-allowed;
		opacity:0.25;
		
		&:is(:hover,:active,:focus){
			text-shadow:unset;
		}
	}
	.active-effects .item-list.effects-list{
		.item.effect{
			font-size:0.9em;
			.item-name h4{
				font-size:1.1em;
			}
		}
		.items-header,.item{
			gap:0.5em;
			.effect-duration{
				flex:0.5 0 0;
			}
			.effect-source{
				flex:0.6 0 0;
			}
			.item-controls,.effect-detail{
				font-size:12px;
				padding:0 0.5em;
				&:not(:first-child){
					border-left:var(--border-faint);
					.effect-delete:not([data-action='delete']){
						opacity:0.2;
						cursor:not-allowed;
					}
				}
			}
		}
	}
}

/* ------------ Actor Sheets ---------- */
.dnd4e.sheet.actor.default .window-content{
	input{
		background:none;
		border-width:0;
		border-radius:0;
	}
	.sheet-header{
		align-items:center;
		border-bottom:unset;
		.summary input:not([type='checkbox'],[type='radio']){
			vertical-align:top;
			background:none;
			border-width:0;
			position:relative;
			border-bottom:var(--border-normal);
			padding:2px;
		}
		.charname{
			padding:0;
			margin:0;
		}
		.charname input{
			padding:0;
			margin:5px;
			font-size:36px;
			height:44px;
			width:95%;
		}
		.charlevel{
			width:100%;
			flex:0 0 180px;
			height:60px;
			margin:0;
			padding:2px;
			text-align:right;
		}
		.image-frame{
			flex:fit-content 0 0;
			aspect-ratio:1 / 1;	
		}
	}
	.sheet-header .profile-img,
	.image-frame .profile-img{
		aspect-ratio:1 / 1;
		margin-right:0;
		margin-left:0;
		object-fit:cover;
		object-position:top;
		display:block;
		border:var(--border-normal);
	}
	.section--attributes{
		border-top:var(--border-heavy);
		border-bottom:var(--border-heavy);
		max-height:100px;
		align-items:stretch;
	}
	.attributes .attribute{
		border-right:var(--border-normal);
		-webkit-box-flex:0;
		-ms-flex:0 0 25%;
		flex:0 0 25%;
		height:72px;
		margin:4px 0;
		padding:0 4px;
	}
	input.bloodied,
	.attribute-health input.bloodied{
		color:#d41111;
	}
	.attributes.attribute-surge{
		min-width: 187px;
	}
	a.rest.second-wind{
		min-width:78px;
	}
	.attribute-value input{
		font-size:18px;
		font-weight:bold;
		&[data-dtype="Number"]{
			text-align:center;
			max-height:26px;
		}
	}
	.attribute-value input[type="checkbox"]{
		margin:2px;
	}
	.attribute-sub strong{
		display:inline-block;
		margin-top:2px;
		margin-bottom:2px;
	}
	.attribute-name,
	.resource-name{
		font-size:18px;
		height:22px;
		line-height:22px;
		margin:0 0 0px;
		position:relative;
		text-align:center;
		margin-top:-3px;
		margin-bottom:-3px;
	}
	.attributes:not(:first-child){
		border-left:var(--border-faint);
	}
	.attributes .attribute-value{
		-webkit-box-pack:center;
		-ms-flex-pack:center;
		justify-content:center;
		text-align:center;
	}
	.attribute-footer--temp-hp{
		margin:auto;
		text-align:center;
		align-items:center;
		display:inline;
	}
	.attribute-footer--temp-hp span,
	.attribute-footer--temp-hp input{
		max-width:40%;
		text-align:center;
	}
	a.rest{
		border:var(--border-faint);
		border-radius:2px;
		background:var(--color-bg-btn-minor-active);
		padding:0 3px;
		margin:0 3px;
		font-size:10px;
		text-align:center;
		min-width:38px;
	}
	.attribute-footer--surge>span{
		font-size:10px;
		max-width:48px;
	}
	.section--abilities{
		margin-right:15px;
		padding-bottom:10px;
		border-bottom:var(--border-heavy);
		
		.ability-header{
			text-align:right;
			font-size:9px;
		}
		.ability-header label{
			margin-left:18px;
		}
		.ability--score + .ability--score{
			border-top:var(--border-faint);
		}
		.ability--score input{
			font-size:16px;
			text-align:left;
			font-weight:bold;
			flex-basis:32px;
		}
		.ability--score .ability-name{
			font-size:16px;
			margin-right:auto;
		}
		.ability-name{
			display:inline-block;
			min-width:24px;
		}
		.ability--score .ability-mod{
			display:flex;
			align-items:center;
			border-right:var(--border-faint);
			font-weight:bold;
			font-size:16px;
		}
		.ability--score .ability-mod-half{
			font-weight:bold;
			text-align:right;
			font-size:16px;
			max-width:35px;
			border-left:var(--border-faint);
		}
	}
	.section--skills{
		margin-right:15px;
		margin-top:10px;
		
		.skill--block{
			min-height:27px;
		}
		.skill--block + .skill--block{
			border-top:var(--border-faint);
		}
		.skill-training{
			max-width:18px;
			padding-top:5px;
			opacity:0.3;
		}
		.skill-name{
			text-align:left;
			border-right:var(--border-faint);
			margin-bottom:0;
			margin-top:0;
			font-size:16px;
			padding-top:3px;
			padding-left:8px;
			font-family: var(--font-body);
			font-weight: normal;
		}
		.skill-mod{
			text-align:right;
			font-weight:bold;
			max-width:35px;
			font-size:16px;
		}
	}
	.section--sidebar .custom-roll-descriptions{
		font-size:11.5px;
	}
	.section--utilities{
		.section--saves div,
		.section--passives div,
		.section--movement div{
			margin-left:5px;
			margin-right:5px;
			padding-top:5px;
            padding-bottom: 5px;
		}
		.section--saves div+div,
		.section--passives div+div,
		.section--movement div+div{
			border-top:var(--border-faint);
			padding-bottom:0;
		}
		.section--saves div label,
		.section--saves div input{
			position:relative;
			&.death-saves-failed{
				height:20px;
			}
		}
		.section--saves div input{
			width:40%;
			text-align:center;
			border-bottom:var(--border-normal);
		}
		.section--saves{
			min-width:143px;
		}
		.section--passives{
			min-width:190px;
		}
		.section--movement{
			min-width:105px;
		}
		.section--movement .movement-dialog{
			text-transform:initial;
		}
		.section--saves .rollable{
			border:unset;
		}
		:is(.section--saves,.saves) img.rollable[src$="svg"]:hover{
			-webkit-filter:brightness(0);
					filter:brightness(0);
		}
		.section--saves .death-saves-failed{
			width:40%;
			border-bottom:var(--border-normal);
			text-align:center;
		}
		div.saving-throw,
		div.death-saves{
			display:flex;
			flex-wrap:wrap;
			align-items:center;
		}
	}
	.tab.attributes{
		overflow:hidden;
	}
	.resource-tracker{
		text-align:center;
		position:relative;
	}
	.resource-tracker input[type="text"]{
		border-bottom:var(--border-normal);
		font-size:18px;
		font-weight:bold;
        text-align:center;
	}
	.resource .attribute-value label.recharge{
		height:32px;
		position:relative;
		font-family:"Signika", sans-serif;
		font-size:11px;
		text-align:center;
		color:var(--color-label);
	}
	.section--details{
		padding-top:0.5em;
		.details-columns{
			align-items:stretch;
		}		
		.detail{
			display:flex;
			align-items:baseline;
			padding:3px;
		}
		.detail input{
			text-align:right;
			flex:1;
		}
		.detail label{
			font-weight:bold;
			flex:5em 0 1;
		}
		.details-mechanical{
			margin-left:0.5em;
			border-left:var(--border-faint);
			padding-left:0.5em;
			
			.detail>*{
				flex-basis:50%;
			}
		}	
	}
	.traits:is(.proficiencies,.languages,.senses){
		padding:0.2em;
	}
	.group-header{
		margin:0.2em 0 0.1em;
		border-bottom:var(--border-faint);
		font-size:22px;
		height:22px;
		line-height:22px;
	}
	.traits-list{
		margin:0 0 0 0;
		padding:0 0 0 4px;
		display:inline;
	}
	.traits-list>li{
		display:inline-block;
	}
	.traits-list>li:not(:last-child)::after{
		content:', ';
	}
	ul.item-properties.tags{
		padding-left:0;
	}
	ul.item-properties.tags li{
		display:inline-block;
		margin:0 2px 0 0;
		padding:0 3px;
		font-size:10px;
		line-height:16px;
		border:var(--border-normal);
		border-radius:3px;
		background:var(--color-bg-btn-minor-active);
	}
	.ability-scores .ability{
		height:67px;
		text-align:center;
		border-bottom:var(--border-engraved);
		&:last-child{
			border-bottom:none;
			margin-bottom:-10px;
		}
		.ability-modifiers{
			height:24px;
			margin:-8px 0 0;
			span:is(.ability-mod,.ability-save){
				flex:0 0 24px;
				height:22px;
				line-height:22px;
				font-size:16px;
				border-top:var(--border-engraved);
			}
			span.ability-mod{
				border-right:var(--border-engraved);
			}
			.ability-proficiency{
				line-height:30px;
			}
			span.ability-save{
				border-left:var(--border-engraved);
			}
		}
	}
	ul.skills-list{
		flex:0 0 200px;
		height:412px;
		list-style:none;
		margin:0 5px 0;
		padding:3px 0 2px;
		border:var(--border-engraved);
		border-radius:3px;
		li.skill{
			height:24px;
			padding:3px 2px;
			&:nth-child(even){
				background:rgba(0, 0, 0, 0.05);
			}
			h4{
				flex:1px;
				margin:0;
				font-size:11px;
				line-height:18px;
			}
			.skill-training{
				flex:0 0 16px;
				line-height:18px;
			}
			.skill-ability{
				flex:0 0 28px;
			}
			.skill-mod{
				flex:0 0 25px;
			}
			.skill-bonus{
				text-align:right;
				padding-right:4px;
			}
		}
	}
	.training-toggle{
		font-size:12px;
		padding-left:7px;
	}
	.locked .training-toggle{
		text-shadow:none;
		cursor:default;
	}
	.center-pane{
		height:100%;
		padding:0 5px 0 3px;
	}
	.attributes input.temphp{
		width:48%;
	}
	h4.box-title{
		height:18px;
		line-height:16px;
		margin:4px 8px 2px;
		font-size:22px;
		border-bottom:var(--border-normal);
		text-align:left;
	}
	.scrollbar{
		height:100%;
		overflow-y:scroll;
		scrollbar-width:thin;
	}
	.resource-half{
		width:50%;
		height:40px;
		margin-top:10px;
		float:left;
		input{
			width:54px;
			height:28px;
		}
		input::placeholder{
			font-size:12px;
			opacity:0.75;
		}
		.attribute-footer span{
			position:relative;
			top:5px;
		}
	}
	.box-title-hit{
		text-align:center;
		height:18px;
		line-height:16px;
		margin:4px 8px 2px;
		font-size:18px;
		border-bottom:var(--border-normal);	
		display:inline;
	}
	.hitdata{
		display:flex;
		justify-content:center;
		align-items:center;
		height:28px;
		line-height:28px;	
		flex:0 0 100%;
		width:50%;
		input{
			text-align:center;
			font-size:24px
		}
		.left input{
			display:flex;
			justify-content:center;
			align-items:center;
			height:28px;
			line-height:28px;
			text-align:right;
			font-size:24px
		}
		.right input{
			display:flex;
			justify-content:center;
			align-items:center;
			height:28px;
			line-height:28px;
			text-align:left;
			font-size:24px
		}
		input::placeholder{
			font-size:16px;
			color:#7a7971;
		}
		.slash{
			font-size:28px;
			color:#7a7971;
		}
	}
	.half{
		width:50%;
	}
	ul.attributes{
		flex:0 0 60px;
		list-style:none;
		margin:0;
		padding:0;
		li.attribute-health{
			height:80px;
			margin:0 0 0 0;
			border:var(--border-engraved);
			border-radius:4px;
			font-size:20px;
			text-align:center;
			&:last-child{
				margin:0;
			}
			.attribute-value{
				display:flex;
				justify-content:center;
				align-items:center;
				height:28px;
				line-height:28px;
			}
			.attribute-value input{
				width:100%;
			}
			.attribute-value input:first-child{
				text-align:right;
				padding-right:4px;
			}
			.attribute-value input:not(:first-child){
				text-align:left;
				padding-left:4px;
			}
			.attribute-value > *{
				font-size:24px;
			}
			.attribute-value.multiple input{
				flex:0 0 33%;
			}
			.attribute-footer{
				flex:0 0 18px;
				margin-top:-1px;
				line-height:18px;
				font-size:12px;
				display:flex;
				justify-content:space-between;
			}
		}
		li.attribute{
			height:60px;
			margin:0 5px 0 0;
			border:var(--border-engraved);
			border-radius:4px;
			text-align:center;
		}
		li.attribute:last-child{
			margin:0;
		}
		li.attribute .attribute-value{
			display:flex;
			justify-content:center;
			align-items:center;
			height:28px;
			line-height:28px;
			font-family:"Modesto Condensed", "Palatino Linotype", serif;
			font-size:20px;
			font-weight:700;
		}
		li.attribute .attribute-value > *{
			font-weight:400;
			font-size:24px;
		}
		li.attribute .attribute-value.multiple input{
			flex:0 0 33%;
		}
		li.attribute .attribute-footer{
			flex:0 0 18px;
			margin-top:-1px;
			line-height:18px;
			font-size:12px;
			font-weight:400;
			white-space:nowrap;
		}
		li.attribute-rest{
			margin:0 0 0 0;
			border:var(--border-engraved);
			border-radius:4px;
			font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
			width:100%;
			height:120px;
			/* margin-top:10px; */
			float:left;
			/* text-align:center; */
			height:60px;
			margin:0 0 0 0;
			border:var(--border-engraved);
			border-radius:4px;
			font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
			font-size:20px;
			text-align:center;	
		}
		li.attribute-rest:last-child{
			margin:0;
		}
		li.attribute-rest .attribute-value{
			display:flex;
			justify-content:center;
			align-items:center;
			height:28px;
			line-height:28px;
		}
		li.attribute-rest .attribute-value > *{
			font-size:24px;
		}
		li.attribute-rest .attribute-value.multiple input{
			flex:0 0 33%;
		}
		li.attribute-rest .attribute-footer{
			flex:0 0 18px;
			margin-top:-1px;
			line-height:18px;
			font-family:"Signika", "Palatino Linotype", serif;
			font-size:12px;
		}
		li.attribute-rest a.rest{
			border:1px solid #b5b3a4;
			border-radius:2px;
			background:var(--color-bg-btn-minor-active);
			padding:0 3px;
			margin:0 3px;
			font-size:12px;
			text-align:left;
		}
		li.attribute-rest a.death{
			content:"\A";
			white-space:pre;
			border:1px solid #b5b3a4;
			border-radius:2px;
			background:var(--color-bg-btn-minor-active);
			padding:0 3px;
			margin:0 3px;
			font-size:12px;
			text-align:left;
		} 
		li.attribute-rest input{
			font-size:12px;
		}
		li.attribute-rest span{
			font-size:12px;
		}
		li.attribute-rest input[type="checkbox"]{
			height:14px;
			width:14px;
			margin:0;
			top:2px;
			position:relative;
		}
		li.attribute-def{
			height:100px;
			margin:0 0 0 0;
			border:var(--border-engraved);
			border-radius:4px;
			font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
			font-size:20px;
			text-align:left;
		}
		li.attribute-ac{
			height:16px;
			position:relative;
			top:-8px;
		}
		li.attribute-ac span{
			position:relative;
			top:-7px;
			font-size:12px;
		}
		li.attribute-ac select{
			position:relative;
			top:-7px;
			left:4px;
			font-size:12px;
			height:20px;
			text-align:center;
		}
		.attribute-def .def-value{
			flex:0 0 25px;
			font-size:16px;
			position:relative;
			top:-1px;
		}
		.attribute-def .def-name{
			flex:1px;
			margin:0;
			font-size:16px;
			line-height:18px;
			width:50px;
			position:relative;
			left:8px;
			text-align:left;
		}
		.attribute-def input[type="text"]{
			position:relative;
			top:-4px;
			flex:0.5;
		}
		.attribute-def .def-name{
			flex:0.4;
		}
		.attribute-def .def-armour{
			flex:0.8;
		}
		ul.attributes .attribute-def .defence-bonus{
			flex:0.8;
		}
		ul.attributes .attribute-def .def-temp{
			flex:0.4;
		}
	}
	.attribute-def{
		margin:0 0 0 0;
		border:var(--border-engraved);
		border-radius:4px;
		font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
		width:100%;
		float:left;
	}
	.resource-full input{
		width:10px;
		top:2px;
	}
	.resource-full input::placeholder{
		font-size:12px;
		color:#7a7971;
	}
	.resource-full .attribute-footer span{
		position:relative;
		top:5px;
	}
	.attribute-res{
		margin:0 0 0 0;
		border-radius:4px;
		font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
		height:328px;
		width:100%;
		float:left;
	}
	.attribute-res .skill.flexrow{
		align-items:center;
	}
	.attribute-init{
		margin:0 0 0 0;
		border:var(--border-engraved);
		border-radius:4px;
		font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
		width:100%;
		float:left;
		text-align:center;
		line-height:32px;
	}
	.attribute-init .init-bonus{
		width:30px;
	}
	.sheet-header .char-details-level{
		height:20px;
		padding:0px;
		margin:5px 0;
		border-bottom:0;
		font-size:16px;
		display:inline-block;
	}
	.sheet-header .char-details-level input{
		width:50px;
		height:100%;
		margin:0;
		font-size:16px;
		text-align:center;
	}
	.sheet-header .char-details-exp{
		height:20px;
		padding:0px;
		margin:5px 0;
		border-bottom:0;
		font-size:16px;
		display:inline-block
	}
	.sheet-header .char-details-exp input{
		width:70px;
		height:100%;
		margin:0;
		font-size:16px;
		text-align:center;
	}
	.sheet-header .char-details-class{
		height:20px;
		padding:0px;
		margin:5px 0;
		border-bottom:0;
		font-size:16px;
		display:inline-block
	}
	.inventory-filters{
		margin:0 2px;
		flex:0 0 20px;
		justify-content:flex-end;
	}
	.inventory{
		flex:0 0 20px;
		justify-content:flex-end;
	}
	h3{
		border-bottom:0px;
		margin:0 8px;
		font-size:medium;
	}
	.daily-item-power-use{
		justify-content:space-between;
		width:100%;
	}
	.daily-item-power-use-counter input{
		width:25px;
		text-align:right;
		margin-right: -8px;
	}
	.daily-item-power-use-check{
		text-align:right;
		align-items:center;
	}
	.inventory-list{
		list-style:none;
		margin:0;
		overflow-y:auto;
		overflow-x:hidden;
		scrollbar-width:thin;
	}
	.inventory-list .item-import.button{
		min-width:116px;
		width:calc(100% - 80px);
		height:12px;
		line-height:normal;
		border:0px;
		float:right;
		margin:2px 2px 2px 0px;
		font-size:12px;
		font-weight:bold;
		min-height:0px;
	}
	.power-filters :is(.group-powers,.sort-powers,.sort-features){
		max-width:144px;
	}
	select:is([name="system.powerGroupTypes"],[name="system.powerSortTypes"],[name="system.featureSortTypes"]){
		min-width:128px;
	}
	input.power-filter-search,
	.filter-search-features input{
		background:var(--color-bg-input);
		min-width:168px;
		margin-right:2px;
	}
	.power-list .item{
		line-height:30px;
		padding:0 2px;
		border-bottom:1px solid transparent;
	}
	.inventory-list .item-controls .power-detail,
	.inventory-list .item-controls .power-detail.active{
		padding-left:3px;
		border:unset;
	}
	.inventory .item-controls .item-toggle {
		opacity:0.5;
	}
	.inventory .item-controls a.item-control.item-toggle.active{
		opacity:1;
	}
	.inventory-list .item-controls > *{
		flex:1;
	}
	.inventory-list .item-controls .flex1{
		flex:1;
	}
	.inventory-list .item-controls .flex2{
		flex:2;
	}
	.inventory-list .item-controls .flex3{
		flex:3;
	}
	.inventory-list .item-controls .flex4{
		flex:4;
	}
	.inventory-list .item-controls a{
		flex:0 0 22px;
		font-size:12px;
		text-align:center;
		white-space:nowrap;
	}
	.inventory-list .collapsible{
		&.collapsed {
			.item-summary {
				padding: 0em 0em;
				border-top: 0px solid rgba(0,0,0,0.1);
			}
		}
		.item-summary{
			flex:0 0 100%;
			font-size:14px;
			line-height:1;
		}
	}
	.inventory .item-controls{
		flex:0 0 68px;
	}
	.powers .item-controls{
		flex:0 0 48px;
	}
	.inventory .item-controls .item-toggle.fixed:hover,
	.powers .item-controls .item-toggle.fixed:hover{
		text-shadow:none;
	}
	.health-option:hover + .config-button,
	.config-button:hover{
		display:block;
	}
	.config-button{
	  position:absolute;
	  top:2px;
	  right:0px;
	  display:none;
	}
	.config-link{
		cursor:var(--cursor-pointer);
		font-weight:bold;
	}
	.config-link:is(:hover,:active,:focus){
		text-shadow:0 0 8px var(--color-shadow-primary);
	}
	prose-mirror[name='system.biography']{
		height:100%;		
	}
	.global-mods .modifier-list{
		align-items:stretch;
		justify-content:space-between;
		flex-wrap:nowrap;
		
		.global-mods-column{
			flex-basis:fit-content;
			
			.modifiers-total{
				flex-basis:5em;
			}
			.modifiers-bonus{
				flex-basis:3em;
			}
		}
	}
	.senses-arbitrary{
		width:100%;
	}
	.global-modifiers{
		margin:0 0 0 0;
		border-radius:4px;
		font-family:"Nodesto", "Signika", "Palatino Linotype", serif;
		width:100%;
		text-align:center;
		line-height:22px;
		
		 .name-label{
			text-align:right;
		 }
	}
	.resistance{
		h4.res-name{
			flex:0.9;
			font-family:var(--font-body);
			font-size:medium;
			margin-bottom:0;
			line-height:1.25;
		}
		.res-mod{
			flex:0.6;
		}
		.res-armour{
			flex:1;
		}
		.res-immune{
			flex:0.8;
		}
	}

	/* ------------ PC Sheets ---------- */
	> .pc{
		.sheet-header{
			font-size:20px;
		}
		.sheet-header h1.charname{
			flex:1;
			height:60px;
			padding:0;
		}
		.sheet-header h1.charname input{
			height:40px;
			margin:10px 0;
		}
		.sheet-header .profile-img,
		.image-frame .profile-img{
			border:var(--border-medium);
		}
		.sheet-header img.profile{
			flex:0 0 160px;
			width:160px;
			height:160px;
		}		
		.tab{
			margin-left:2px;
		}
		.attributes span.sep{
			max-width:20px;
			font-size:22px;
		}
		.attribute-input{
			min-width:32px;
		}
		.attributes{
			max-height:90px;
			padding:2px;
			margin:2px;
		}
		.attributes .attribute-display{
			border-top:var(--border-normal);
			margin-left:2px;
			margin-right:2px;
		}
		.section--abilities{	
			padding-top:2px;
		
			input.ability-score{
				font-size:24px;
				max-height:30px;
				flex:44px 0 0;
				margin:0 auto;
			}			
			.ability--score .ability-mod{
				flex:2em 0 0;
			}
		}
		input.skill-mod{
			position:relative;
			top:-5px;
			background:none;
			border-width:0;
		}
		.resource .attribute-value input{
			flex:0 0 25%;
		}
		input.milestones{
			width:18px;
			border-bottom:var(--border-normal);
			max-width:9%;
			height:14px;
		}
		.section--resources{
			.resource-tracker{
				padding:0 0.5em;
				margin:0;
			}
			.resource-tracker .resource-name input[type="text"]{
				height:unset;
				padding:unset;
				text-align:center;
				border-bottom:unset;
			}
			.resource-footer{
				justify-content:center;
				gap:1em;
				margin-top:0.2em;
			}
			.resource-footer .checkbox{
				flex:fit-content 0 0;
			}
			.resource-tracker.sep{		
				flex:fit-content 0 0;
			}
		}
		.section--movement .movement-dialog{
			text-transform:uppercase;
		}
	}

	/* ------------ NPC Sheets ---------- */
	> .npc{
		.npc-upper select{
			padding:0px;
			margin:0 3px 0 3px;
		}
		.sheet-header .summary.flexrow{
			flex-wrap:nowrap;
		}
		.sheet-header .summary-type{
			flex-basis:114px;
		}
		.sheet-header .summary-typeother{
			flex-basis:calc(100% - 472px);
			flex-shrink:2;
		}
		.sheet-header .summary-leader{
			flex-basis:98px;
		}
		.sheet-header .summary-role{
			flex-basis:98px;
		}
		.sheet-header .summary-role-second{
			flex-basis:86px;
		}
		.sheet-header .summary-size{
			flex-basis:102px;
		}
		.sheet-header .summary-origin{
			flex-basis:90px;
		}
		.sheet-header .summary-name-npc{
			flex-basis:calc(100% - 380px);
		}
		.sheet-header .summary-exp input{
			width:75%;
			text-align:left;
		}
		.sheet-header .automath{
			flex-grow:0;
			position:relative;
			height:80%;
			flex-basis:2em;
			border:var(--border-engraved);
			border-radius:4px;
		}
		.sheet-header .automath .label{
			display:none;
		}
		.sheet-header .automath input[type="checkbox"],
		.sheet-header .automath img{
			position:absolute;
			height:100%;
			width:100%;
		}
		.sheet-header .automath input[type="checkbox"]{
			margin:0;
			padding:0;
			opacity:0;
		}
		.sheet-header .automath img{
			filter:brightness(var(--automath-brightness));
			border:unset;
			pointer-events:none;
			padding:2px 4px;
			margin:0;
			opacity:0.4;
		}
		.sheet-header .automath input[type="checkbox"]:checked+img{
			opacity:1;
		}
		.npc-lower .sheet-body{
			height:calc(100% - 20px);
		}
		.image-frame{
			margin-right:6px;
		}
		.npc-upper .basics{
			border-top:var(--border-heavy);
			border-bottom:var(--border-heavy);
			line-height:1.4;
			justify-content:flex-start;
			align-items:stretch;
		}
		.npc-upper .basics>.flexcol{
			flex-grow:1;
			padding:2px;
			margin:2px;
		}
		.npc-upper .basics>.flexcol:not(:last-child,:nth-child(4)){
			border-right:var(--border-normal);
		}
		.npc-upper .basics>.flexcol:last-child{
			padding-left:0;
			padding-right:0.5em;
		}
		.npc-upper .basics>.flexcol:nth-child(4){
			padding-right:0;
		}
		.npc-upper .basics>.flexcol>*{
			flex-grow:0;
		}
		.npc-upper .basics>.resources{
			padding-left:0;
			flex-basis:170px;
			flex-grow:0;
			input{
				text-align:center;
				padding:0;
			}
		}
		.npc-lower {
			flex: 1;
			display: flex;
			flex-direction: column;
			.section--tabs {
				flex: none;
			}
			.section--tabs-content {
				flex: 1;
				position: relative;
				> .tab {
					position: absolute;
					inset: 0;
				}
			}
		}
		.npc-upper li.tag{
			margin-bottom:0;
		}
		.npc-upper .basics>.defences{
			flex-grow:0;
		}
		.npc-upper .basics>.defences:not(.advanced){
			flex-basis:105px;
		}
		.npc-upper .basics>.defences .defence-value{
			font-size:1em;
		}
		.npc-upper .basics>.defences:not(.advanced) .defence-value.bonus{
			color:var(--color-text-good);
		}
		.npc-upper .basics>.defences:not(.advanced) .defence-value.penalty{
			color:var(--color-text-bad);
		}
		.npc-upper .basics>.defences.advanced{
			flex-basis:140px;
		}
		.npc-upper .basics>.ability-scores{
			flex-basis:100px;
			flex-grow:0;
		}
		+ a.rest{
			margin:0px;
		}
		.npc-upper .basics input{
			display:inline-block;
			text-align:left;
			max-height:18px;
			max-width:1.6em;
			font-weight:bold;
		}
		.npc-upper .hitpoints{
			max-width:180px;
			font-size:16px;
		}
		.npc-upper .hitpoints input{
			text-align:center;
		}
		.npc-upper .resources .roll-save{
			border:unset;
			flex-grow:0;
			margin-right:4px;
		}
		.npc-upper .basics>.defences{
			flex-grow:0.15;
		}
		.npc-upper .defence{
			display:inline-block;
			position:relative;
			top:-2px;
		}
		.npc-upper .senses .skill-name{
			max-width:120px;
		}
		.npc-upper .def-name{
			font-size:16px;
			display:inline-block;
			width:2em;
		}
		.npc-upper label.def-base{
			margin-left:6px;
		}
		.npc-upper .basics .alignment input{
			max-width:120px;
		}
		.section--skills .skill-name{
			flex-basis:300px;
			max-width:10em;
		}
		.section--skills .skill--block{
			flex-wrap:nowrap;
		}
		label.skill-mod{
			max-width:4em;
		}
		label.skill-base{
			border-left:var(--border-normal);
			margin-left:1em;
			padding-left:1em;
			max-width:8em;
		}
	}
	
	/* ------------ Hazard Sheets -------------- */
	> .hazard{
		&:not(.minimized){
			min-width:452px;
		}
		.sheet-header .role-details{
			justify-content:flex-start;
		}
		.sheet-header .role-details>.summary-level{
			flex-basis:100px;
			flex-grow:0;
			text-align:right;
			margin-left:auto;
		}
		.sheet-header .summary-exp{
			flex-grow:0;
		}
		.sheet-header .summary-level input{
			width:50%;
		}
		.sheet-header .summary-role,
		.sheet-header .summary-role-second,
		.sheet-header .summary-role-third{
			flex-basis:86px;
			flex-grow:0;
		}
		.def-none{
			position:relative;
			aspect-ratio:1 / 1;
			display:inline-block;
			margin-right:2px;
		}
		.def-none input[type='checkbox']{
			height:100%;
			width:100%;
			display:block;
			margin:0;
			padding:0;
			max-height:100%;
			max-width:100%;
			opacity:0;
		}
		.def-none input[type='checkbox']+.button{
			position:absolute;
			left:0;
			bottom:0;
			height:100%;
			width:100%;
			line-height:1;
			pointer-events:none;
		}
		.def-none input[type='checkbox']:not(:checked)+.button{
			opacity:40%;
		}
		.defence.null :is(.def-name,.attribute-name){
			opacity:40%;
		}
		.combat label.hazard-detection{
			font-weight:bold;
		}
		.combat input[name="system.details.detection"]{
			max-width:unset;
			font-family:inherit;
			font-weight:normal;
		}
		.description{
		}
		.global-mods .global-mod[data-modifiers="skills"]{
			display:none;
		}
		.global-mods .global-mods-column:nth-child(2){
			width:50%;
		}
	}
}


/* ------------- Item Sheets --------------- */
.dnd4e.sheet.item.default .window-content{
	.content .currency input[type="text"]{
		background:none;
		border-width:0;
		border-radius:0;
	}
	.sheet-header{
		flex:none;
	}
	.header-2{
		align-items:stretch;
	}
	section{
		overflow:hidden;
		overflow-y:auto;
	}
	section .item-properties{
		flex:0 0 120px;
		margin:5px 5px 5px 0;
		padding-right:5px;
		border-right:var(--border-engraved);

		height: calc(100% - 10px);
	}
	section .item-properties .form-group{
		margin:0.25em 0;
	}
	section .item-properties .form-group label{
		line-height:20px;
	}
	section .item-properties .form-group input{
		text-align:right;
	}
	section .item-properties .properties-list{
		list-style:none;
		margin:0;
		padding:0;
	}
	section .item-properties .properties-list li{
		margin:3px 0;
		padding:0 2px;
		background:rgba(0, 0, 0, 0.05);
		border:var(--border-engraved);
		text-align:center;
		font-size:12px;
		line-height:18px;
	}
	.item-list .item-weight {
		flex:0 0 60px;
		text-align: center;
	}
	.item-list .item-quantity {
		flex:0 0 62px;
		text-align: center;
	}
	.item-list .item-controls {
		text-align: center;
	}
	.content .item-list .item-controls {
		flex:0 0 44px;
	}
	&:not(.minimized){
		min-width:460px;
		min-height:400px;
	}
	.sheet-header{
		flex:0 0 100px;
	}
	.sheet-header img.profile{
		flex:0 0 100px;
		width:100px;
		height:100px;
		object-fit:contain;
		border:none;
		border-right:var(--border-engraved);
	}
	.tab.description{
		flex-direction:row;
        align-items:stretch;
		overflow:hidden;
		.item-properties{
			flex:0 0 25%;
		}
		.description-main{
			padding-right:calc(0 - var(--scroll-margin));
			label{
				color:var(--color-text-subtle);
			}	
			.multi-editor-wrapper{
				height:100%;
				display:flex;
				flex-direction:column;
				prose-mirror[name='system.description.value']{
					flex-basis:100%;
				}
				prose-mirror[name='system.description.gm'].inactive .editor-content{
					background:var(--input-background-color);
				}
			}
		}
	}
	.tab.content{
		gap:0.5rem;
	}
	.sheet-header{
		img.profile{
			border:2px solid #000;
		}
		.item-subtitle{
			flex:0 0 80px;
			height:60px;
			margin:0;
			padding:5px;
			text-align:right;
		}
		.item-subtitle .item-type{
			font-size:24px;
			line-height:26px;
			margin:0;
		}
		.item-subtitle .item-status{
			font-size:16px;
			line-height:24px;
		}
	}
	.sheet-navigation{
		margin-bottom:5px;
	}
	.sheet-navigation .item{
		font-size:18px;
	}
	.form-group{
		span{
			text-align:center;
		}
		.attack-roll span{
			flex: 0 0 50px;
		}
		.attack-roll select:first-of-type {
			min-width: 122px;
		}
		.item-range span:first-of-type{
			flex:0 0 16px;
		}
		.item-range span:not(.sep):last-of-type{
			flex:0 0 0px;
			min-width: 94px;
		}
		.item-range select:first-of-type{
			min-width: 88px;
		}
		.consumption select.consume-type{
			flex:1;
		}
		.consumption select.consume-target{
			width:80%;
		}
		.item-range .range-within-of{
			flex:1 0 6px;
		}
		.item-range .range-of{
			flex:0 0 64px;
		}
		&.input-select select{
			flex:1.8;
		}
		&.input-select-select select{
			flex:1.5;
		}
		&.two-input input{
			flex:0.5;
		}
		&.two-input span {
			flex:0 0 16px;
		}
		&.two-input select,
		.item-range input{
			flex:1;
		}
		&.two-input label.source-name{
			max-width:100px;
			text-align:right;
			padding-right:0.5em;
		}
		&.two-input input.source-name{
			flex-basis:20%;
		}
		}
	span.sep{
		flex:0 0 8px;
	}
	.prepared{
		flex:1.3 !important;
		text-align:right;
		padding-right:10px;
	}
	.spell-materials{
		flex:0 0 100%;
		margin:0.25em 0;
		justify-content:flex-end;
	}
	.spell-materials label{
		flex:0 0 64px;
		text-align:right;
		margin-right:5px;
		font-size:12px;
		line-height:24px;
	}
	.spell-materials input[type="text"]{
		flex:0 0 48px;
		margin-right:10px;
	}
	ul.auto-keywords{
		padding-left:0;
		font-size:var(--font-size-12);
		font-weight:bold;
		color:var(--color-label);
		line-height:1;
	}
	h4.damage-header{
		margin:0;
		padding:0;
		font-weight:bold;
		line-height:24px;
		font-family:var(--font-body);
		font-size:medium;
	}
	.damage-parts{
		list-style:none;
		margin:0;
		padding:0;
	}
	.damage-parts .damage-part{
		flex:0 0 100%;
		padding:0 0 2px;
		gap:0.25rem;
	}
	.damage-parts .damage-part label{
		font-weight:600;
		text-align:right;
	}
	.damage-parts .damage-part input{
		flex:2;
	}
	.damage-parts .damage-part select{
		margin-left:5px;
		flex:1;
	}
	.damage-control{
		width:18px;
		flex:0 0 18px;
		float:right;
		text-align:right;
		opacity:0.75;
	}
	.res-group{
		width:100%;
	}
	.res-group .damage-parts{
		max-width:24em;
		margin-left:auto;
	}
	.res-group .damage-parts .damage-part{
		margin-bottom:6px;
	}
	.onetext-parts{
		list-style:none;
		margin:0;
		padding:0;
	}
	.onetext-parts .onetext-part{
		flex:0 0 100%;
		padding:0;
	}
	.onetext-control{
		width:18px;
		flex:0 0 18px;
		line-height:24px;
		float:right;
		text-align:right;
		opacity:0.75;
	}
	.macro-text{
		height:calc(100% - 132px);
	}
	.macro-text textarea{
		height:100%;
	}
	.item-damage .dmg-base-qty{
		flex: 0.5 0 0;
	}
	.weapon-properties label.damage-type{
		max-width:100%;
	}
	.attribute-modifiers{
		max-height:76px;
		line-height:22px;
	}
}
.sheet.default .item-consumable .form-group :is(.display-effect,.effect-html){
	text-align:right;
}

/* ----------------------------------------- */
/*  Active Effect Sheets
/* ----------------------------------------- */

.dnd4e.active-effect-config .sheet-header{
	flex: unset;
}
.dnd4e.active-effect-config.default .window-content{
	section.tab{
		header.effect-status{
			display:grid;
			grid-template-columns: 2fr 5fr 1rem;
			&.clt-enabled{
				grid-template-columns: 2fr 6fr 1rem;
			}
		}
		ol.statuses-list li{
			display:grid;
			grid-template-columns:2fr 5fr 1rem;
			&.clt-enabled{
				grid-template-columns:2fr 6fr 1rem;
			}
			.copy-buttons{
				gap:0.25em;
				height:100%;
				align-items:stretch;
			}
		}
		header.effect-dot,
		ol.dots-list li{
			display:grid;
			grid-template-columns:1fr 5fr 1rem;
		}
		header.effect-keyword,
		ol.keywords-list{
			display:grid;
			grid-template-columns:1fr 1rem;
		}
		.dots-list .amount{
			height:100%;
			display:flex;
			align-items:start;
		}
		.editor-container,
		.editor.prosemirror{
			min-height:14em;
			height:100%;
		}
		.prosemirror menu,
		.editor.prosemirror{
			background-color:rgba(0, 0, 0, 0.05);
		}
		input.saveDC{
			max-width:4em;
		}
		h3.subsection{
			font-size:1em;
			margin:0 0 0.2rem;
			border-bottom:unset;
			font-weight:bold;
		}
		.effects-header>div{
		   padding:2px 2px 0;
		}
		.effects-header>:first-child{
			padding-left:4px;
		}
		:is(.dots-list,.statuses-list,.keywords-list){
			list-style:none;
			margin:0.25em 0 0 0;
			padding:0;
		}
		li:is(.effect-dot,.effect-status,.effect-keyword){
			align-items:center;
			gap:0.25em;
		}
		.effect-status{
			.status-select select{
				width:100%;
			}
			button{
				border-radius:3px;
				font-size:80%;
				line-height:1;
				padding:0.5em;
                height:100%;
			}
		}
		.keywords-list li.effect-keyword{
			flex:30% 0 0;
		}
		.form-group.statuses{
			display:grid;
		}
		&.scrollable{
			height:100%;
			overflow-y:auto;
		}
		&:is(.details) header{
			align-items:center;
			display:grid;
			gap:0.25rem;
			grid-template-columns:12rem 7rem 7rem 4rem 1rem;
			margin:0;
			padding:2px;
			position:relative;
			/*grid-template-columns: 12fr 7fr 7fr 4fr 1rem;*/
		}
	}
	.sheet-footer{
		bottom:0px;
		position:sticky;
	}
}

/* ----------------------------------------- */
/*  Other Dialogues
/* ----------------------------------------- */

#token-hud .status-effects{
	grid-template-columns:25px 25px 25px 25px 25px 25px 25px
}
#trait-selector .window-content{
	.trait.has-children .trait-list{
		columns:2;
	}
	.trait-list{
		list-style:none;
		margin:0;
		padding:0;
		.trait-list{
			padding-left:20px;
		}
		.trait.has-children{
			>.expand{
				font-size:0.8em;
				opacity:0.75;
				&.fa-chevron-down.toggle-on{
					~.trait-list .trait{
						display:block;
					}
					&::before{
						content:"\f077";
					}
				}
			}
			.trait.toggle-on{
				display:block;
			}
		}
	}
	input[type="text"]{
		height:18px;
	}
	label.checkbox{
		font-size:inherit;
	}
}
.dialogue-content{
	display:flex;
	flex-direction:column;
	gap:0.5em;
	/*
	header{
		display:flex;
		justify-content:space-between;
		align-items:center;
		font-weight:600;
		> h1{
			font-size:x-large;
			margin-bottom:0;
		}
	}*/
	h1.form-title{
		font-size:medium;
		padding:0;
		margin:0;
		font-family:var(--font-body);
	}
	+footer,+.form-footer{
		padding-top:0.5em;
	}
}

/* Tooltip text */
.tooltip .tooltipcontent{
	font-family:sans-serif;
	font-size:11px;
	font-weight:normal;
	visibility:hidden;
	background-color:rgba(0, 0, 0, 0.8);
	color:#fff;
	text-align:center;
	padding:5px;
	border-radius:6px;
	line-height:13px;
	min-width:128px;
	width:240px;
	/* Position the tooltip text */
	position:fixed;
	z-index:1;
	/* Fade in tooltip */
	opacity:0;
	transition:opacity 0.3s;
}
/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltipcontent{
	visibility:visible;
	pointer-events:none;
	opacity:1;
}
.status-effect-title{
	visibility:hidden;
	position:absolute;
	top:-38px;
	width:175px;
	font-size:21px;
	box-sizing:content-box;
	background:rgba(0, 0, 0, 0.6);
	box-shadow:0 0 15px #000;
	border:1px solid #333;
	border-radius:4px;
	height:26px;
	line-height:30px;
	text-align:center;
	color: #ccc;
}
.status-effect-title.active{
	visibility:visible;
}

.dnd4e.roll-dialogue.default{
	h2{
		font-family:var(--font-body);
		font-size:1.2em;
		font-weight:700;
		text-decoration:none;
		margin-top:0.4em;
		margin-bottom:unset;
		border-bottom:var(--border-faint);
	}
	.roll-times{
		align-items:center;
		flex-wrap:nowrap;
	}
	.roll-times .label{
		flex:100%;
		line-height:1;
	}
	.roll-times .buttons{
		justify-content:flex-end;
		align-items:center;
		flex-wrap:nowrap;
		flex:unset;
		width:fit-content;
	}
	.roll-times .buttons :is(.button,input){
		flex:2.5em 0 0;
	}
	.roll-times .buttons input{
		height:2.2em;
	}
	.target-detail{
		background:var(--color-bg-btn-minor-active);
		padding:0.3em;
		.form-group.stacked {
			gap: 0;
		}
	}
	.form-group {
		margin-bottom: 0.25rem;
		&.roll-times .label {
			max-width: unset;
		}
	}
	.multitarget-tab{
		display:none;
	}
	.multitarget-tab .score-vs-def{
		display:flex;
		width:100%;
		align-items:center;
		select{
			flex:1;
			max-width:65px;
		}
		label{
			flex:0;
			padding:0.25rem;
		}
	}
	.multitarget-np-flex{
		display:flex;
		justify-content:space-between;
		align-items:stretch;
	}
	.multitarget-np-flex:not(.has-target,.has-multi){
		display:none;
	}
	.multitarget-np-flex.has-target:not(.has-multi) button{
		display:none;
	}
	.roll-dialogue .multitarget-np-flex .target-label{
		flex:100% 10 10;
		display:flex;
		flex-direction:column;
		justify-content:center;
		border:2px groove rgba(0, 0, 0, 0.4);
	}
	.roll-dialogue .multitarget-np-flex .target-label>h3{
		font-size:1em;
		text-align:center;
		font-weight:700;
		border-bottom:unset;
		margin-top:0.25em;
		margin-bottom:0.25em;
	}
	.multitarget-np-flex button[id="multibonus-toggle"]{
		width:fit-content;
	}
}
.custom-skill-config .custom-skill-control{
	margin:0 5px;
	flex:0;
}
.dnd4e.movement-dialog.default{
	.move-bonus{
		max-width:60px;
		padding:0px 3px 0px 3px;
	}
	.move-bonus-temp{
		max-width:40px;
		padding-right:3px;
	}
	.form-group .move-value:not(:first-child){
	 margin-right:4px;
	}
	.form-group .move-bonus{
		max-width:60px;
		padding:0px 3px 0px 3px;	
	}
	.form-group .temp-label{
		max-width:40px;
		padding-right:3px;
	}
	.form-group .temp-value{
		max-width:30px;
		padding:0px 3px 0px 3px;
		text-align:center;
	}
	textarea[name="system.movement.notes"]{
		width:100%;
		min-height:1em;
		resize:vertical;
		border:none;
	}
}
#action-point-hd textarea{
	width:100%;
	min-height:10em;
	resize:vertical;
	border:none;
}
#attribute-bonuses{
	overflow-y:auto;
	overflow-x:hidden;
}
.bonus-main{
	flex-wrap:nowrap;
	align-items:center;
	justify-content:flex-start;
	margin-bottom:1px;
	label{
		white-space:nowrap;
		margin-right:2px;
	}
	input[type="text"].bonus-name{
		flex-basis:125px;
		margin-right:0.5em;
	}
	input[type="text"].bonus-value{
		flex-basis:80px;
		margin-right:0.5em;
	}
	:is(.bonus-delete,.bonus-active){
		flex-grow:0;
	}
	.bonus-active{
		margin-left:0;
	}
}
.bonus-note{
	width:100%;
	min-height:10em;
	resize:vertical;
}
.bonus-add:before{
	content:'+';
	display:inline-block;
	font-weight:bold;
}
#custom-roll-descriptions{
	overflow-y:auto;
}
#custom-roll-descriptions>div{
	width:99.5%;
	margin-top:4px;
}
#custom-roll-descriptions h2{
	margin-top:0.5em;
}
.dnd4e:is(.default, .standard-form) .window-content table.custom-skill-list th{
	padding:0.2em 0.5em;
}
:is(th,td).custom-skill-id{
	width:7em;
}
:is(th,td).custom-skill-ability{
	width:9em;
}
:is(th,td).custom-skill-control{
	width:2em;
}
:is(th,td).custom-skill-acp{
	text-align:center;
}
:is(th,td).custom-skill-control{
	text-align:right;
}
.hitpoint-config input[type="text"]{
	width:40px;
	text-align:center;
}
input[type="text"].hp-con{
	border-bottom:1px dotted #000;
}
input[type="text"].checkbox-rider{
	width:15%;
}
.roll-dialogue .button.circle{
	width:9.375%;
	text-align:center;
}
input[type="text"].dice-count{
	width:12.5%;
	text-align:center;
}
.roll-dialogue .form-group.bonus{
	max-width:50%;
	margin:0;
}
.roll-dialogue .form-group.bonus .checkbox{
	font-size:1em;
	line-height:1;
}
.dnd4e.con-bon-config{
	h1.dialogue-title{
		font-size:1.2em;
		font-weight:700;
		text-decoration:none;
		margin-top:0.4em;
		margin-bottom:unset;
		border-bottom:var(--border-faint);
	}
	.condition-row{
		padding:2px 0.25em;
		gap:1em;
		justify-content:space-between;
	}
	.condition-row .condition-name{
		font-weight:600;
		flex:40% 0 10;
	}
	.condition-row .condition-mod-value{
		flex:2.5em 0 10;
		text-align:right;
	}
	.condition-row .condition-mod-bonus{
		flex:5em 0 10;
	}
}


/* ----------------------------------------- */
/*  Chat Cards
/* ----------------------------------------- */

.dnd4e.chat-card{
	font-style:normal;
	font-size:14px;
	
	.card-header img{
		flex:0 0 36px;
		margin-right:5px;
		display:flex;
		flex-direction:row;
		flex-wrap:wrap;
		justify-content:flex-start;
	}
	.card-header .item-name{
		justify-content:center;
	}
	.card-header h3{
		flex-grow:0;
		margin:0;
		line-height:1;
		font-family:"Modesto Condensed", "Palatino Linotype", serif;
		font-size:20px;
		font-weight:700;
		color:var(--color-light-1);
		border-bottom:0px;
		padding-left:3px;
	}
	.card-header h3:hover{
		text-shadow:0 0 10px red;
	}
	.card-buttons{
		margin:5px 0;
		display:flex;
		flex-wrap:wrap;
		justify-content:space-between;
	}
	.card-buttons span {
		display:block;
		line-height:28px;
		text-align:center;
		border:1px solid #ccc;
	}
	.card-buttons button {
		font-size:12px;
		height:24px;
		line-height:20px;
		margin:2px 0;

		flex-basis:calc(50% - 2px);
		overflow:hidden;
	}
	.card-buttons button:last-child:nth-child(odd){
		flex-basis:100%;
	}
	.card-footer{
		padding:3px 0 0;
		border-top:var(--var-border-engraved);
	}
	.card-footer span{
		border-right:var(--var-border-engraved);
		padding:0 5px 0 0;
		font-size:10px;
	}
	.card-footer span:last-child{
		border-right:none;
		padding-right:0;
	}
	.chatDamageButtons{
		font-size:var(--font-size-12);
		display:flex;
	}
	.fakechatbutton{
		width:100%;
		border:var(--border-engraved);
		border-radius:3px;
		background:var(--color-bg-btn-minor-active);
		padding:3px 3px;
		margin:2px 1px;
		text-align:center;
		flex-grow:1;
	}
	.effects-tray label,
	.card-content .collapsible{
		cursor:pointer;
	}
	.roboto-upper{
		font-family:Roboto, sans-serif;
		font-weight:bold;
		text-transform:uppercase;
	}
	.effects-tray label{
		cursor:pointer;
		display:flex;
		justify-content:center;
		gap:0.25rem;
		font-size:var(--font-size-11);
	}
	.effects-tray label > span{
		flex:none;
	}
	.effects-tray label .fa-bolt{
		color:var(--color-text-light-6);
	}
	.effects-tray label .fa-caret-down{
		transition:all 250ms ease;
	}
	.effects-tray label::before,
	.effects-tray label::after{
	  content:"";
	  flex-basis:50%;
	  border-top:1px dotted #9f9275;
	  align-self:center;
	}
	.card-buttons .dnd4e-button-icon{
		display:inline-block;
		vertical-align:middle;
		line-height:0px;
		font-size:16px;
		width:15px;
		height:15px;
		border:none;
	}
	.card-buttons .dnd4e-button-icon img{
		border:none;
	}
	.effects-tray .effects{
		display:flex;
		flex-direction:column;
		overflow:hidden;
		transition:all 250ms ease;
		padding:0;
	}
	.effects-tray label .fa-caret-down{
		transition:all 250ms ease;
	}
	.effects-tray.collapsed label .fa-caret-down{
		transform:rotate(-90deg);
	}
	.effects-tray .effects .effect{
		display:flex;
		gap:0.5rem;
		align-items:center;
		padding-bottom:0.25rem;
		margin-bottom:0.25rem;
		border-bottom:1px solid #ddd;
	}
	.effects-tray .effects .effect > img{
		width:32px;
		height:32px;
		border:2px solid #9f9275;
		box-shadow:0 0 4px rgba(0, 0, 0, 0.45);
		border-radius:0;
		background-color:#3d3d3d;
	}
	.name-stacked{
		display:flex;
		flex-direction:column;
	}
	.effects-tray .effects .effect .name-stacked{
		flex: 1;
	}
	.name-stacked .title{
		font-family:"Roboto Slab", serif;
		font-size:0.875rem;
		font-weight:bold;
	}
	.name-stacked .subtitle{
		font-family:vRoboto, sans-serif;
		font-size:0.625rem;
		color:#666;
	}
	.effects-tray .effects .effect > button{
		width:28px;
		height:28px;
		display:flex;
		align-items:center;
		justify-content:center;
		padding:0 0 0 4px;
		font-size:0.75rem;
	}
	&:is(.feature-card,.ritual-card) .card-header{
		background:var(--background-other);
	}
	&:is(.consumable-card,.loot-card,.equipment-card,.weapon-card,.backpack-card,.tool-card) .card-header{
		background:var(--background-item);
	}
	&.collapsed>:not(header.card-header){
		display:none;
	}
}

.dnd4e .card-content{
	margin:0;
	padding:0;
	
	&:not(.autogen) p,
	.item-summary>p,
	.flavour{
		padding:2px 4px;
		margin:0;
	}
	.flavour,
	.item-summary>:not(.item-details){
		background:var(--gradient-4e);
	}
	h3{
		font-size:12px;
		margin:0;
		font-weight:bold;
	}
	> *{
		-webkit-user-select:text;
		-moz-user-select:text;
		-ms-user-select:text;
		user-select:text;
	}
	.item-details span{
		margin:1px;
	}
	:is(.item-details,.flavour,.item-description)>span,
	:is(.item-details,.flavour,.item-description) p,
	.item-description{
		padding:1px 3px;
		margin:0;
	}
	.item-details .action+.range-type{
		padding-left:1em;
	}
	.item-details :is(.usage,.keywords,.action,.range-type){
		font-weight:bold;
	}
	.item-description,
	.item-details .alt,
	.item-details .alt-highlight:nth-child(even) {
		background:var(--gradient-4e);
	}
}


/* ----------------------------------------- */
/* Journals
/* ----------------------------------------- */
.sheet.journal-entry{
	.journal-entry-page{
		:is(h1, h2, h3, h4, h5, h6):not(:first-child){
			margin-top:1.5rem;
		}
		h4{
			font-size:1.15em;
			font-style:italic;
		}
		h5{
			font-size:1.1em;
			font-weight:bold;
			font-style:italic;
		}
		h6{
			font-size:1em;
			font-weight:bold;
			font-style:italic;
		}
	}
}

.journal-page-content table,
.editor-content table,
.editor-enriched table{
	box-sizing:border-box;
	user-select:text;	
	border-collapse:collapse;
	border:unset;
}
.journal-page-content table thead,
.editor-content table thead,
.editor-enriched table thead{
	color:#fff;
}
.journal-page-content table tbody,
.editor-content table tbody,
.editor-enriched table tbody{
	border-bottom:1px solid var(--color-border-light-tertiary);
}
.journal-page-content table th,
.journal-page-content table td,
.editor-content th,
.editor-content td,
.editor-enriched th,
.editor-enriched td{
	border:unset;
	padding:0.5em;
}
.journal-page-content table tbody tr:nth-child(odd),
.editor-content table tbody tr:nth-child(odd),
.editor-enriched table tbody tr:nth-child(odd){
	background:rgba(0, 0, 0, 0.05);
}
.journal-page-content table tfoot,
.editor-content table tfoot,
.editor-enriched table tfoot{
	font-size:80%;
	background-color:#dedede;
}

/* ----------------------------------------- */
/* Chat Messages
/* ----------------------------------------- */

.flavor-text:is(.critical,.fumble,.probable-hit,.probable-miss){
	font-weight:bold;
}
:is(.roll-expression,.roll-formula).roll-highlight{
	background-color:#99ccff;
}

.dice-roll{
	.dice-tooltip{ 
		display:block;
		transition:grid-template-rows 250ms ease;
	}
	.dice-total.success{
		color:var(--color-text-good);
		background:#c7d0c0;
		border:1px solid #006c00;
	}
	.dice-total.failure{
		color:var(--color-text-bad);
		background:#ffdddd;
		border:1px solid #6e0000;
	}
	.dice-total.critical{
		color:var(--color-text-good);
	}
	.dice-total.fumble{
		color:var(--color-text-bad);
	}
	.hit-prediction.immune{
		text-align:center;
		line-height:24px;
		margin-top:3px;
		background:rgba(0, 0, 0, 0.1);
		border:1px solid var(--color-border-light-2);
		border-radius:3px;
		box-shadow:0 0 2px #fff inset;
	}
	.hit-prediction.fumble,
	.dice-roll .hit-prediction.miss{
		color:var(--color-text-bad);
	}
	.hit-prediction.critical,
	.hit-prediction.hit{
		color:var(--color-text-good)
	}
}

.dot-report{
	.damage-taken{
		font-weight:bold;
	}
	.damage-taken:not(.resistant-full,.healing){
		color:var(--color-text-bad);
	}
	.damage-taken.resistant-full,
	.damage-taken.healing{
		color:var(--color-text-good);
	}
}



@media (prefers-reduced-transparency){
    body.theme-dark .application,
	body.theme-dark.application{
        --background:#221d21;
    }
}